![Mod Logo](common/src/main/resources/assets/playerbackup/playerbackup_250.png)

# Player Backup

![Architectury Logo](data:image/png;base64,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)

Since Version 1.3.0 This Mod requires [Architectury API](https://www.curseforge.com/minecraft/mc-mods/architectury-api) 

## TL;DR

Create backup of own player
```bash
/playerbackup backup
```

Create backup of an other player
```bash
/playerbackup backup <name>
```

Restore last backup of own player
```bash
/playerbackup restore
```

Restore last backup of another player
```bash
/playerbackup restore <name>
```

Restore earlier backup of another player
```bash
/playerbackup restore <name> <timestamp of backup>
```

## Commands
### Backup
The backup commands are set up to be as convenient as possible. The base command ``/playerbackup backup`` will create a backup of the current player. If the amout of current backups of that player exeed the ``deleteOnRestore``-config the oldest backup is deleted.
To backup another player you may extend the command with the players name: ``/playerbackup backup Absolem90``.

### Restore
The restoration commands are setup analogously to the backup. By starting with ``/playerbackup restore`` you will restore your own latest backup.
By extending the command with a player name you are able to restore the latest backup of that player onto that player: ``/playerbackup restore Absolem90``. You cannot apply the backup to someone other than the original player.
By extending the command even further you may select the backup to restore. You will get suggestions of available backups:
``/playerbackup restore Absolem90 21_08_23_190324``. The backup is name after the timestamp it was created on. The format is `yy_MM_dd_kkmmss`. [for reference](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)

## Configuration
The configuration file will be created at ``config/playerbackup.json``.
The following Properties are configurable:

| name | type | default value | description |
| --- | --- | --- | --- |
| backupCountPerPlayer | integer | 5 | This count sets the allowed amount of backups per player. If the amount is reached the oldest backup is removed. If the value is <= 0 the limitation is disabled. |
| deleteOnRestore | booelean | true | If the flag is set to true a backup is deleted, once it is restored. So the restoration can only be done once.|


### Permissions
The ``config/playerbackup.json`` also configures the access level for the four commands.
Each Permission consists of the name, its id, a description and permission level.
By setting the permission level you may choose the enable the commands to other players. The valid options are:

| Level | Player | OP |
| --- | --- | --- |
| ALL | true | true |
| OP | false | true |
| NONE | false | false |

| permission | command | default |
| --- | --- | --- |
| selfRestore | ``/playerbackup restore`` | OP |
| restore | ``/playerbackup restore <name>`` | OP | 
| selfBackup | ``/playerbackup backup`` | ALL |
| backup | ``/playerbackup backup <name>`` | OP |

[Wiki Source](https://nekoyue.github.io/ForgeJavaDocs-NG/javadoc/1.16.5/net/minecraftforge/server/permission/DefaultPermissionLevel.html)

## Data Storage
The backup data is store within th worlds directory: `<world folder>/playerbackup`. Each backup is stored in an own file. The file names follow this pattern:
`<player uuid>-<timestamp>.dat`. The content is binary data.

## QA
This Mod was testest with the following versions:

| Minecraft | Forge |
| --- | --- |
| 1.16.5 | 36.1.31 |
| 1.16.5 | 36.2.2 |

## Disclaimer
Even though I tested the mod eagerly I cannot guarantee for a bugless behavior. I will not take responsibiliy if any data is lost or destroyed.

## Questions and Inspiration
Feel free to open up Github Tickets. Once in a while I will take a look at them. 